<!-- Form zum Ändern existierender User - entweder für eigene Daten oder als Admin -->

<%= form_for user, remote: true, namespace: user.id, html: {autocomplete: 'off', onsubmit: 'updatePassword();'} do |f| %> <!-- #Bei Submit neuen Key speichern, damit umkodiert werden kann  -->

  <%= render 'users/form/email', f: f, user: user, readOnly: !@login.has_capability?('user')%>  <!-- Nutzer darf E-Mail nicht nachträglich ändern (?) -->

  <%= render 'users/form/password', f: f, user: user, namespace: true %>

  <% if @login.has_capability?('user') %>    <!-- Nutzer darf eigenen Accounttyp nicht nachträglich ändern (?) -->
    <%= render 'users/form/type', f: f, label: 'Typ' %>
  <% end %>

  <%= render 'users/form/state', f: f, label: 'Bundesland' %>

  <%= render 'users/form/extra_data', f: f, user: user  %>

  <%= f.submit 'Aktualisieren', class: 'btn btn-outline-success'%>
  <button class='btn btn-outline-secondary' onclick="$('#modal').modal('hide');return false;">Abbrechen</button>
<% end %>