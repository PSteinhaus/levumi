<div class="panel-group" role="tablist">
</div>


<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="hSimple">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#cSimple" aria-expanded="false" aria-controls="cSimple">
        Direkte Eingabemasken
        </a>
      </h4>
    </div>
    <div style="" aria-expanded="false" id="cSimple" class="panel-collapse collapse" role="tabpanel" aria-labelledby="hSimple">
      <div class="panel-body">
        <%= render 'tests/generic_views/standard/result_direct_edit_mask'%>
      </div>
    </div>
    </div>

    <% @measurement.results.each do |r| %>
        <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="h<%=r.id%>">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#c<%=r.id%>" aria-expanded="false" aria-controls="c<%=r.id%>">
              <%= "#{r.student.name}" %>
            </a>
          </h4>
        </div>
        <div id="c<%=r.id%>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="h<%=r.id%>">
          <div class="panel-body">
            <%= render 'tests/generic_views/standard/result_student_edit_mask',result: r%>
          </div>
        </div>
      </div>
    <% end %>

  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="hAdd">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#cAdd" aria-expanded="false" aria-controls="cAdd">
        Schüler/-innen hinzufügen oder entfernen
        </a>
        </h4>
    </div>
    <div id="cAdd" class="panel-collapse collapse" role="tabpanel" aria-labelledby="hAdd">
      <div class="panel-body">
        <%= form_tag(user_group_assessment_measurement_results_path(@user, @group, @assessment, @measurement), :method => :put, :html => {:class => "form"}, :data => {:remote => true}) do %>
            <label>Zur Zeit erfasst (Häkchen entfernen für Änderung):</label>
            <% if @measurement.students.empty? %>
                <p>--</p>
            <% end %>
            <% (@measurement.students).each do |s| %>
                <div class="checkbox">
                  <label>
                    <%= check_box_tag "results[students[#{s.name}]]", s.id, true %> <%= "#{s.name}" %><br/>
                  </label>
                </div>
            <% end %>
            <label>Noch nicht erfasst (Häkchen setzen für Änderung):</label>
            <% if (@group.students - @measurement.students).empty? %>
                <p>--</p>
            <% end %>
            <% (@group.students - @measurement.students).each do |s| %>
                <div class="checkbox">
                  <label>
                    <%= check_box_tag "results[students[#{s.name}]]", s.id, false %> <%= "#{s.name}" %><br/>
                  </label>
                </div>
            <% end %>
            <%= submit_tag 'Speichern', :class => "btn btn-primary", :data => {:confirm => "Sind Sie sicher?"} %>
            <%= link_to "Zurück",  [@user, @group, @assessment], :data => {:remote => true}%>
        <% end %>
      </div>
    </div>
  </div>

</div>